"use strict";

$(document).ready(function () {
  $(".modal form").on("submit", function (e) {
    e.preventDefault();
    var t = $(this).attr("id");
    $('input[form="' + t + '"]').val(""), $(".modal").modal("hide"), $("#successModal").modal("show");
  }), $(".phone").inputmask("+7 (999) 999-99-99"), $("#mobilemenu-toogler").on("click", function (e) {
    e.preventDefault(), showBackFrame(), showMobileMenu();
  }), $(".back_frame").on("click", function (e) {
    e.preventDefault(), hideBackFrame(), closeMobileMenu();
  }), $(".footer__menu .menu__title").on("click", function (e) {
    e.preventDefault(), openFooterMenu($(this));
  }), $(".left-menu .sub-toogle").on("click", function (e) {
    e.preventDefault(), openLeftMenuItem($(this));
  }), $(".left-menu__title").on("click", function (e) {
    $(this).toggleClass("active");
  });
  new Swiper("#main-banner", {
    loop: !0,
    autoplay: {
      delay: 5e3
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev"
    }
  });
  var e = new Swiper(".thumb-gallery", {
    loop: !1,
    direction: "horizontal",
    spaceBetween: 10,
    slidesPerView: 2,
    freeMode: !0,
    watchSlidesProgress: !0,
    breakpoints: {
      550: {
        slidesPerView: 3
      },
      768: {
        slidesPerView: 4,
        direction: "vertical"
      }
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev"
    }
  });
  new Swiper(".main-gallery", {
    loop: !1,
    spaceBetween: 10,
    slidesPerView: 1,
    thumbs: {
      swiper: e
    }
  });
  $(".product-slider").slick({
    speed: 300,
    slidesToShow: 4,
    slidesToScroll: 4,
    responsive: [{
      breakpoint: 768,
      settings: {
        slidesToShow: 1,
        infinite: !0,
        slidesPerRow: 2,
        rows: 2
      }
    }]
  }), $(".col__input").on("click", "span", function (e) {
    e.preventDefault();
    var t = $(this).parent().find("input"),
      o = Number(t.val());
    $(this).hasClass("minus") ? o -= 1 : o += 1, o < 0 && (o = 0), o > 9999 && (o = 9999), t.val(o);
  }), $(".col__input input").on("change input", function (e) {
    Number($(this).val()) > 9999 && $(this).val(9999);
  }), $(".cart-item__delete").on("click", function (e) {
    confirm("Вы действительно хотите удалить товар из корзины") && ($(this).parent().parent().remove(), showToast("Корзина", "Товар удален"));
  }), $(".clear-cart").on("click", function (e) {
    e.preventDefault(), confirm("Вы действительно хотите удалить все товары из корзины?") && ($(".cart-body").empty(), showToast("Корзина", "Корзина очищена"), setTimeout(function () {
      location.href = "/empty-cart.html";
    }, 3e3));
  }), $(".wish").on("click", function (e) {
    var _this = this;
    if (e.preventDefault(), $(this).attr("disabled", !0), !$(this).hasClass("active")) return $(this).addClass("active"), void setTimeout(function () {
      showToast("Избранноe", "Товар добавлен в избранное"), $(_this).attr("disabled", !1);
    }, 1500);
    setTimeout(function () {
      showToast("Избранноe", "Товар удален из избранного"), $(_this).attr("disabled", !1);
    }, 1500), $(this).removeClass("active");
  }), $(".addCart").on("click", function (e) {
    var _this2 = this;
    e.preventDefault(), $(this).attr("disabled", !0), setTimeout(function () {
      showToast("Корзина", "Товар добавлен в корзину"), $(_this2).attr("disabled", !1);
    }, 1500);
  });
});
var showBackFrame = function showBackFrame() {
    $(".back_frame").addClass("active");
  },
  hideBackFrame = function hideBackFrame() {
    $(".back_frame").removeClass("active");
  },
  showMobileMenu = function showMobileMenu() {
    $("#mobile-menu").addClass("active");
  },
  closeMobileMenu = function closeMobileMenu() {
    $("#mobile-menu").removeClass("active");
  },
  openFooterMenu = function openFooterMenu(e) {
    e.hasClass("active") ? closeFooterMenu() : (closeFooterMenu(), e.addClass("active"));
  },
  closeFooterMenu = function closeFooterMenu() {
    $(".footer__menu .menu__title").removeClass("active");
  },
  openLeftMenuItem = function openLeftMenuItem(e) {
    e.parent().hasClass("active") ? closeLeftMenuItem() : (closeLeftMenuItem(), e.parent().addClass("active"));
  },
  closeLeftMenuItem = function closeLeftMenuItem() {
    $(".left-menu__item").removeClass("active");
  },
  showToast = function showToast(e, t) {
    $.toast({
      text: t,
      heading: e,
      showHideTransition: "slide",
      allowToastClose: !0,
      hideAfter: 3e3,
      stack: 5,
      position: "bottom-right",
      bgColor: "#EFEFEF",
      textColor: "#595959",
      textAlign: "left",
      loader: !0,
      loaderBg: "#005BFF",
      beforeShow: function beforeShow() {},
      afterShown: function afterShown() {},
      beforeHide: function beforeHide() {},
      afterHidden: function afterHidden() {}
    });
  };